---
layout: post
title: "MATLAB实现室内三维热传导"
date: 2023-03-09 15:28:47
category: matlab
img: images/post/3dheatdiffusion.png
published: true
comments: true
---
MATLAB实现室内三维热传导

<!-- more -->
## 👻三维热传导方程
热传导方程也称为扩散方程，除了描述固体内热传导过程，也可以刻画分子、气体的扩散。  
首先在空间取直角坐标系，取 n 个点在 t 时刻的温度 u=u(t,x,y,z)为热运动的表征量。  
在介质内任取空间微元 dV=[x,x+dx]\*[y,y+dy]\*[z,z+dz]，查看微元 dV 在时间间隔[t,t+dt]内的温度变化，根据热量守恒定律，物体温度升高所需热量等于外部流入热量和内部的热源产生热量之和。而热量的流动遵循傅里叶热传导定律：热量从温度高处向低处，沿某方向流动热量的多少与温度在该方向减少率成比例，其数学表示式为  

c 表示物体材质比热容，单位是 J/(kg·K)，ρ表示物体材质密度，单位是 kg/m^3 。f(t,x,y,z)=g(t,x,y,z)/cρ，g(t,x,y,z)表示热源强度，即单位时间内从单位体积内放出的热量。   
通过有限差分法，上式可转化为有利于求解的离散形式：  

热传导方程本质上是偏微分方程，在采用差分离散化空间变量后转换为时间变量的常微分方程采用 Euler 法求解，相当于将偏微分方程转化为线性代数方程组，再通过向前 Euler 法迭代求出每一时刻的温度值，为下一节利用 MATLAB 进行仿真设置基础。  
## 😀基于有限差分法的三维热传导数值仿真  
在进行热传导求解之前，要先设定室内空气三维热传导的仿真条件。  
（1）设置室内在固定位置恒定功率P的采暖设备的热源项为f=P/cρ。边界条件设置为绝热边界条件，即没有热量可以从边界流出，边界温度等于内部相邻节点温度，也不受到外界环境温度的影响，只与室内热源相关。  
注：如果边界处有受迫对流，f+=h(T0-Ta)，其中 h 是表面热传导系数，T0是边界处的温度，Ta是外界空气的温度。     
(2) 网格尺寸：仿真的网格尺寸根据室内三维模型的几何形状进行计算，并且是尺寸相应的倍数。创建详细的网格会增加仿真时间，但会增加分析的准确性。最终仿真网格由 40×40×24 个单元（共 38400 个单元）组成，模拟一个空间大小为 5m×5m×3m 的室内环境。在室内空气热传导计算中，可以忽略建筑内部的家具所占用的空间。  
(3) 迭代次数和时间步长：由于小规模问题不采用复杂的迭代式，可用较大的时间分段 Nt 去提高收敛性和精度。将迭代式、初始条件和网格确定好后，三维热传导模型就可以进行求解。在程序中将迭代次数设置为 14400，时间步长为 10，在首次设定好后进行调整，以平衡相对较小空间的计算速度和精度。  
(4) 绘制三维图像查看结果：为了方便查看仿真结果并且导出用于可视化的节点数据文件，在MATLAB中绘制三维图像，并在标题显示计算的进度。  
通过slice(x,y,z,v,sx,sy,sz) 函数绘制三维切片图，其中x,y,z为三维数据，沿着x,y,z轴创建切片平面，v是(x,y,z)位置上的温度，sx,sy,sz是切片的位置。x,y轴在空间的边界添加切面显示室内封闭环境，在z轴添加多个切片查看最终三维仿真效果，以便覆盖空间中的主要温度传导情况，绘制每一个网格代表的温度。  
添加colorbar和caxis([Tmin,Tmax])通过求出过程中的温度最小值和最大值，指定插值面着色以使切片着色，规定温度范围内的颜色样条查看温度分布。然后，使用流线图来描绘温度的流场。  
在室外通风的热源模式下还需要通过streamslice(x,y,z,vx,vy,vz,startx,starty,startz)绘制在室内表面绘制温度流线图，变量分别代表x网格点，y网格点，z网格点，温度在x方向梯度，温度在y方向梯度，温度在z方向梯度，x起始点，y方向起始点，z方向起始点。  
通过streamline()函数绘制开窗通风后的室内空间温度流线，查看温度的流向。  



